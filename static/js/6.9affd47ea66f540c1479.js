webpackJsonp([6],{WrVz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("QJuQ"),n=a("Umlw"),s=a("fZjL"),o=a.n(s),i=a("vLgD");function r(t){var e=new FormData;return o()(t).forEach(function(a,l){e.append(a,t[a]),console.log(a,t[a])}),Object(i.a)({url:"/student",method:"post",data:e})}var u=a("yrTI"),d={data:function(){return{dialogVisible:!1,dialogMark:"",queryStudentForm:{pageNum:1,pageSize:10,campusId:null,gradeYear:null,className:null,activeStatus:null,stuName:null},editStudentForm:{txt:null,campusId:null,gradeYear:null,classId:null,stuName:null,sex:null,activeStatus:null,nickname:null},multipleSelection:[],dataList:[],total:0,curPage:1,pageSize:10,campusList:[],gradeList:[],classList:[]}},computed:{tableData:function(){return this.dataList}},watch:{},mounted:function(){var t=this;Object(l.d)().then(function(e){var a=e.data;0===a.ret&&(console.log("查询校区",a),t.campusList=a.dataList)}),Object(n.c)(this.queryGradeForm).then(function(e){console.log("查询学届",e.data);var a=e.data;0===a.ret&&(t.gradeList=a.dataList)}),this.queryStudentAction()},methods:{handleSizeChange:function(t){console.log("SizeChange 每页 "+t+" 条"),this.queryStudentForm.pageSize=t,this.queryStudentAction()},handleCurrentChange:function(t){console.log("CurrentChange 当前页: "+t),this.queryStudentForm.pageNum=t,this.queryStudentAction()},handleSelectionChange:function(t){this.multipleSelection=t,_log("选中的",t)},queryStudentAction:function(){var t,e=this;(t=this.queryStudentForm,Object(i.a)({url:"/student/list",method:"post",data:t})).then(function(t){console.log("查询",e.queryStudentForm,t.data);var a=t.data;0===a.ret&&(e.dataList=a.dataList,e.total=a.totalCount)})},addStudentBtnClick:function(){this.dialogVisible=!0,this.dialogMark="add",this.editStudentForm={txt:null,campusId:null,gradeYear:null,classId:null,stuName:null,sex:null,activeStatus:null,nickname:null}},addStudentAction:function(){var t=this;console.log("添加",this.editStudentForm),r(this.editStudentForm).then(function(e){var a=e.data;console.log("添加",a),0===a.ret&&(t.$message({message:"添加校友成功",type:"success"}),t.dialogVisible=!1,t.queryStudentAction())})},editStudentClick:function(t){this.dialogVisible=!0,this.dialogMark="edit",this.editStudentForm=t.row},editStudentAction:function(){var t,e,a=this;(t=this.editStudentForm,e=new FormData,o()(t).forEach(function(a,l){e.append(a,t[a]),console.log(a,t[a])}),Object(i.a)({url:"/student/"+t.stuId,method:"put",data:e})).then(function(t){var e=t.data;console.log("添加校友",e),0===e.ret&&(a.$message({message:"编辑成功",type:"success"}),a.dialogVisible=!1,a.queryStudentAction())})},delStudentBtnClick:function(){var t=[];this.multipleSelection.forEach(function(e,a){t.push(e.stuId)}),0!=t.length?this.delStudentAction(t):this.$message({message:"请选择一条记录",type:"warning"})},delStudentClick:function(t){var e=t.row.stuId;this.delStudentAction([e])},delStudentAction:function(t){var e=this;console.log("要删除的id",t),this.$confirm("此操作将删除这条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a;(a={ids:t},Object(i.a)({url:"/student",method:"delete",data:a})).then(function(t){var a=t.data;console.log("delStudent",a),0===a.ret&&(e.$message({message:"校友删除成功",type:"success"}),e.dialogVisible=!1,e.queryStudentAction())})})},submitBtnClick:function(t){console.log(this.dialogMark),"add"==this.dialogMark?this.addStudentAction():"edit"==this.dialogMark&&this.editStudentAction()},editCampusChange:function(t){console.log("校区改变"),this.editStudentForm.classId=null,this.editStudentForm.gradeYear&&this.queryClassOption()},editGradeChange:function(t){console.log("学届改变"),this.editStudentForm.classId=null,this.editStudentForm.campusId&&this.queryClassOption()},queryClassOption:function(){var t=this;Object(u.d)({campusId:this.editStudentForm.campusId,gradeYear:this.editStudentForm.gradeYear}).then(function(e){var a=e.data;console.log("查询班级",a),0===a.ret&&(t.classList=a.dataList,console.log(t.classList))})},test:function(){for(var t=0;t<100;t++)r({txt:null,campusId:7,gradeYear:1991,classId:21,stuName:"测试姓名"+t,sex:0,activeStatus:null,nickname:"测试外号"+t}).then(function(t){var e=t.data;console.log("添加",e),0===e.ret&&console.log("添加1条记录成功")})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-header",[t._v("校友管理")]),t._v(" "),a("el-main",[a("el-form",{attrs:{model:t.queryStudentForm,inline:!0,size:"small"}},[a("el-form-item",{attrs:{label:"校区"}},[a("el-select",{attrs:{placeholder:"请选择校区"},model:{value:t.queryStudentForm.campusId,callback:function(e){t.$set(t.queryStudentForm,"campusId",e)},expression:"queryStudentForm.campusId"}},[a("el-option",{attrs:{label:"全部",value:null}}),t._v(" "),t._l(t.campusList,function(t,e){return a("el-option",{attrs:{label:t.campusName,value:t.campusId}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"学届"}},[a("el-select",{attrs:{placeholder:"请选择学届"},model:{value:t.queryStudentForm.gradeYear,callback:function(e){t.$set(t.queryStudentForm,"gradeYear",e)},expression:"queryStudentForm.gradeYear"}},[a("el-option",{attrs:{label:"全部",value:null}}),t._v(" "),t._l(t.gradeList,function(t,e){return a("el-option",{attrs:{label:t.gradeName,value:t.gradeYear}})})],2)],1),t._v(" "),a("el-form-item",{attrs:{label:"班级(班)"}},[a("el-input",{model:{value:t.queryStudentForm.className,callback:function(e){t.$set(t.queryStudentForm,"className",e)},expression:"queryStudentForm.className"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{attrs:{placeholder:"请选择状态"},model:{value:t.queryStudentForm.activeStatus,callback:function(e){t.$set(t.queryStudentForm,"activeStatus",e)},expression:"queryStudentForm.activeStatus"}},[a("el-option",{attrs:{label:"全部",value:""}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"校友姓名"}},[a("el-input",{model:{value:t.queryStudentForm.stuName,callback:function(e){t.$set(t.queryStudentForm,"stuName",e)},expression:"queryStudentForm.stuName"}})],1),t._v(" "),a("el-form-item",{attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.queryStudentAction}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.addStudentBtnClick}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.delStudentBtnClick}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.test}},[t._v("删除")])],1)],1),t._v(" "),a("el-table",{attrs:{height:"400",data:t.tableData,border:"",stripe:"",size:"small"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticClass:"icon-btn-edit",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(a){t.editStudentClick(e)}}}),t._v(" "),a("el-button",{staticClass:"icon-btn-del",attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(a){t.delStudentClick(e)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"campusName",label:"所属校区",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"gradeName",label:"学届",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"className",label:"班级",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"stuName",label:"姓名",width:""}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t"+t._s(1==e.row.activeStatus?"已激活":"未激活")+"\n\t\t\t\t\t")]}}])})],1),t._v(" "),a("div",{staticClass:"pagination",staticStyle:{"margin-top":"10px"}},[a("el-pagination",{attrs:{"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"add"==t.dialogMark?"添加记录":"编辑记录",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"editStudentForm",attrs:{model:t.editStudentForm,"label-width":"100px","label-position":"right",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属校区"}},[a("el-select",{attrs:{placeholder:"请选择校区"},on:{change:t.editCampusChange},model:{value:t.editStudentForm.campusId,callback:function(e){t.$set(t.editStudentForm,"campusId",e)},expression:"editStudentForm.campusId"}},t._l(t.campusList,function(t,e){return a("el-option",{attrs:{label:t.campusName,value:t.campusId}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"学届"}},[a("el-select",{attrs:{placeholder:"请选择学届"},on:{change:t.editGradeChange},model:{value:t.editStudentForm.gradeYear,callback:function(e){t.$set(t.editStudentForm,"gradeYear",e)},expression:"editStudentForm.gradeYear"}},t._l(t.gradeList,function(t,e){return a("el-option",{attrs:{label:t.gradeName,value:t.gradeYear}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"班级"}},[a("el-select",{attrs:{placeholder:"请选择班级"},model:{value:t.editStudentForm.classId,callback:function(e){t.$set(t.editStudentForm,"classId",e)},expression:"editStudentForm.classId"}},t._l(t.classList,function(t,e){return a("el-option",{attrs:{label:t.className,value:t.classId}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:t.editStudentForm.stuName,callback:function(e){t.$set(t.editStudentForm,"stuName",e)},expression:"editStudentForm.stuName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{attrs:{placeholder:"请选择学届"},model:{value:t.editStudentForm.sex,callback:function(e){t.$set(t.editStudentForm,"sex",e)},expression:"editStudentForm.sex"}},[a("el-option",{attrs:{label:"女",value:0}}),t._v(" "),a("el-option",{attrs:{label:"男",value:1}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"外号"}},[a("el-input",{model:{value:t.editStudentForm.nickname,callback:function(e){t.$set(t.editStudentForm,"nickname",e)},expression:"editStudentForm.nickname"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"手机"}},[a("el-input",{attrs:{disabled:""},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{attrs:{disabled:""},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工作单位"}},[a("el-input",{attrs:{disabled:"",type:"textarea"},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"居住地址"}},[a("el-input",{attrs:{disabled:"",type:"textarea"},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"教育经历"}},[a("el-input",{attrs:{disabled:"",type:"textarea"},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"工作经验"}},[a("el-input",{attrs:{disabled:"",type:"textarea"},model:{value:t.editStudentForm.txt,callback:function(e){t.$set(t.editStudentForm,"txt",e)},expression:"editStudentForm.txt"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submitBtnClick}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,c,!1,function(t){a("npO/")},null,null);e.default=m.exports},"npO/":function(t,e,a){var l=a("wtG/");"string"==typeof l&&(l=[[t.i,l,""]]),l.locals&&(t.exports=l.locals);a("rjj0")("0f18874b",l,!0)},"wtG/":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.el-header {\n\tline-height: 60px;\n}\n",""])},yrTI:function(t,e,a){"use strict";e.d=function(t){return Object(s.a)({url:"/class/list",method:"post",data:t})},e.a=function(t){var e=new FormData;return n()(t).forEach(function(a,l){e.append(a,t[a]),console.log(a,t[a])}),Object(s.a)({url:"/class",method:"post",data:e})},e.c=function(t){var e=new FormData;return n()(t).forEach(function(a,l){e.append(a,t[a]),console.log(a,t[a])}),Object(s.a)({url:"/class/"+t.classId,method:"put",data:e})},e.b=function(t){return Object(s.a)({url:"/class",method:"delete",data:t})};var l=a("fZjL"),n=a.n(l),s=a("vLgD")}});